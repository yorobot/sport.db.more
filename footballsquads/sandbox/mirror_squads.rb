require_relative 'squads_helper'



Webcache.root = '../../../cache'  ### c:\sports\cache


outdir = "./tmp/cache.footballsquads"
# outdir = "../../../footballcsv/cache.footballsquads"


DATASETS = [

=begin
  ['eng.1',   %w[2023/24 2022/23 2021/22 2020/21
                 2019/20 2018/19 2017/18 2016/17 2015/16 2014/15]],
  ['eng.2',   %w[2023/24 2022/23 2021/22 2020/21]],
  ['eng.3',   %w[2023/24 2022/23 2021/22 2020/21]],

  ['es.1',    %w[2023/24 2022/23 2021/22 2020/21]],
  ['es.2',    %w[2023/24 2022/23 2021/22 2020/21]],

  ['de.1',    %w[2023/24 2022/23 2021/22 2020/21
                 2019/20 2018/19 2017/18 2016/17 2015/16 2014/15]],
  ['de.2',    %w[2023/24 2022/23 2021/22 2020/21]],

  ['sco.1',  %w[2023/24 2022/23 2021/22 2020/21]], 

  ['it.1',    %w[2023/24 2022/23 2021/22 2020/21]],
  ['it.2',    %w[2023/24 2022/23 2021/22 2020/21]],

  ['fr.1',    %w[2023/24 2022/23 2021/22 2020/21]],
  ['fr.2',    %w[2023/24 2022/23 2021/22 2020/21]],

  ['pt.1',   %w[2023/24 2022/23 2021/22 2020/21]],

  ['nl.1',   %w[2023/24 2022/23 2021/22 2020/21]],
  ['be.1',   %w[2023/24 2022/23 2021/22 2020/21]],

  ['tr.1',  %w[2023/24 2022/23 2021/22 2020/21]],
  ['gr.1',  %w[2023/24 2022/23 2021/22 2020/21]],

  ['ru.1',  %w[2023/24 2022/23 2021/22 2020/21]],
  ['ua.1', %w[2023/24 2022/23 2021/22 2020/21]],
  ['pl.1',  %w[2023/24 2022/23 2021/22 2020/21]],

  ['dk.1',    %w[2023/24 2022/23 2021/22 2020/21]],
  ['at.1',    %w[2023/24 2022/23 2021/22 2020/21
                 2019/20 2018/19 2017/18 2016/17 2015/16 2014/15]],
  ['ch.1',    %w[2023/24 2022/23 2021/22 2020/21]],

  ['cz.1',    %w[2023/24 2022/23 2021/22 2020/21]],
  ['hr.1',    %w[2023/24 2022/23]],
  ['hu.1',    %w[2023/24 2022/23 2021/22 2020/21]],

  ['no.1',    %w[2024 2023 2022 2021]],
  ['se.1',    %w[2024 2023 2022 2021]],

  ['ie.1',    %w[2024 2023 2022 2021]],

  ## add overseas leagues
   ['br.1',  %w[2024]],
   ['ar.1',  %w[2024]], 
=end


 # ['world',  %w[2022 2018 2014 2010]],
 # ['euro',   %w[2024 2020 2016 2012]],
]


## see 
##    https://www.footballsquads.co.uk/updates.htm
DATASETS_UPDATE = [
  ['euro',         %w[2024 2020]],
  ['southamerica', %w[2024]],

  ['nl.1',   %w[2023/24]],

  ['eng.1',   %w[2023/24]],

  ['es.1',    %w[2023/24]],
  ['es.2',    %w[2023/24]],

  ['it.1',    %w[2023/24]],

]


datasets = DATASETS_UPDATE

## get all league (page) urls
league_urls = []
datasets.each do |league, seasons|
  seasons.each do |season|
    league_urls << Footballsquads.league_url( league: league, 
                                              season: season )
  end
end

pp league_urls


### noet - cache: false to update - get/fetch lastest pages
write_squads( league_urls, outdir: outdir,
                           cache:  false )    



puts "bye"


